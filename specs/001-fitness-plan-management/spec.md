# Feature Specification: 健身计划管理

**Feature Branch**: `001-fitness-plan-management`
**Created**: 2025-11-10
**Status**: Draft
**Input**: User description: "健身计划创建、管理、提醒"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 创建个性化健身计划 (Priority: P1)

用户需要根据自己的健身目标和时间安排创建定制化的健身计划，包括选择锻炼项目、设定锻炼时长和频率。

**Why this priority**: 创建计划是整个功能的基础，没有计划就无法进行后续的管理和提醒。这是 MVP 的核心功能。

**Independent Test**: 用户可以独立完成创建健身计划的全流程，从输入计划名称、选择锻炼项目到保存计划，并能在计划列表中查看到新创建的计划。

**Acceptance Scenarios**:

1. **Given** 用户已登录系统, **When** 用户点击"创建健身计划"并填写计划名称"减脂训练"、选择锻炼项目（跑步30分钟、俯卧撑20个）、设定每周执行3次（周一、三、五）, **Then** 系统保存该计划并显示在用户的计划列表中
2. **Given** 用户正在创建健身计划, **When** 用户未填写计划名称就尝试保存, **Then** 系统提示"计划名称不能为空"并阻止保存
3. **Given** 用户已创建计划, **When** 用户在计划列表中点击该计划, **Then** 系统显示计划的完整详情（名称、锻炼项目、时间安排）

---

### User Story 2 - 管理现有健身计划 (Priority: P2)

用户需要能够查看、编辑和删除已有的健身计划，以适应身体状况变化或目标调整。

**Why this priority**: 用户的健身需求会随时间变化，能够调整计划是保持用户长期使用的关键。这是 P1 的自然延伸。

**Independent Test**: 用户可以在计划列表中选择任一计划进行查看、编辑（修改锻炼项目或时间）或删除，并看到变更立即生效。

**Acceptance Scenarios**:

1. **Given** 用户有一个名为"减脂训练"的计划, **When** 用户点击"编辑"并将跑步时长从30分钟改为45分钟，然后保存, **Then** 系统更新计划并在详情页显示新的时长
2. **Given** 用户有多个健身计划, **When** 用户选择一个不再需要的计划并点击"删除", **Then** 系统弹出确认对话框，用户确认后该计划从列表中移除
3. **Given** 用户正在编辑计划, **When** 用户点击"取消", **Then** 系统放弃所有修改并返回计划详情页，显示原始数据

---

### User Story 3 - 接收健身提醒通知 (Priority: P1)

用户需要在计划的锻炼时间到来时收到提醒通知，帮助养成规律的健身习惯。

**Why this priority**: 提醒功能是用户坚持执行计划的关键驱动力，与创建计划同等重要，是 MVP 必需功能。

**Independent Test**: 用户可以为健身计划设置提醒时间，并在指定时间收到通知，通知包含计划名称和锻炼内容摘要。

**Acceptance Scenarios**:

1. **Given** 用户创建了"减脂训练"计划并设定周一上午8点提醒, **When** 系统时间到达周一上午8点, **Then** 用户收到推送通知："[减脂训练] 该锻炼啦！今日任务：跑步30分钟、俯卧撑20个"
2. **Given** 用户有一个设置了提醒的计划, **When** 用户在设置中关闭该计划的提醒, **Then** 系统不再在计划时间发送通知
3. **Given** 用户收到健身提醒通知, **When** 用户点击通知, **Then** 系统打开该健身计划的详情页

---

### User Story 4 - 暂停和恢复健身计划 (Priority: P3)

用户可能因为受伤、出差或其他原因需要暂时停止某个计划，但希望保留计划以便日后恢复。

**Why this priority**: 这是增强用户体验的功能，但不影响核心流程。用户可以通过删除和重建计划达到类似效果，优先级较低。

**Independent Test**: 用户可以将一个活动的计划标记为"暂停"，暂停期间不会收到提醒，且可以随时恢复计划。

**Acceptance Scenarios**:

1. **Given** 用户有一个活动的"增肌训练"计划, **When** 用户点击"暂停计划"并选择暂停原因（可选）, **Then** 计划状态变为"已暂停"，系统停止发送该计划的提醒
2. **Given** 用户有一个已暂停的计划, **When** 用户点击"恢复计划", **Then** 计划状态变为"活动"，系统按原定时间表恢复发送提醒
3. **Given** 用户查看计划列表, **When** 列表中包含活动和已暂停的计划, **Then** 系统用不同的视觉标识区分两种状态（如颜色或图标）

---

### Edge Cases

- 用户创建计划时选择了过去的日期作为开始时间，系统应如何处理？（建议：提示用户并建议使用当前日期或未来日期）
- 用户同时设置了多个计划在相同时间提醒，系统如何避免通知过载？（建议：合并为一条通知或按优先级排序）
- 用户删除计划后，已设置的未来提醒应该如何处理？（建议：自动取消所有相关提醒）
- 用户在没有网络连接时创建或编辑计划，数据如何处理？（建议：本地保存草稿，网络恢复后同步）
- 计划中的锻炼项目数量是否有上限？（建议：设定合理上限如20个，防止性能问题和用户体验下降）

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统 MUST 允许用户创建健身计划，包含计划名称、目标描述、锻炼项目列表
- **FR-002**: 系统 MUST 允许用户为每个锻炼项目定义名称、时长/次数、强度级别
- **FR-003**: 系统 MUST 支持为计划设置执行频率（每日、每周特定日期、自定义间隔）
- **FR-004**: 系统 MUST 允许用户查看所有创建的健身计划列表
- **FR-005**: 系统 MUST 允许用户编辑现有健身计划的所有属性
- **FR-006**: 系统 MUST 允许用户删除健身计划，删除前需要确认
- **FR-007**: 系统 MUST 为每个计划提供详情页，显示完整的计划信息和锻炼项目
- **FR-008**: 系统 MUST 允许用户为健身计划设置提醒时间（具体时刻，如每天8:00）
- **FR-009**: 系统 MUST 在设定的提醒时间向用户发送通知
- **FR-010**: 提醒通知 MUST 包含计划名称和当日锻炼项目摘要
- **FR-011**: 系统 MUST 允许用户开启或关闭特定计划的提醒功能
- **FR-012**: 系统 MUST 允许用户暂停和恢复健身计划
- **FR-013**: 已暂停的计划 MUST 不发送提醒通知
- **FR-014**: 系统 MUST 验证计划名称非空且不超过50个字符
- **FR-015**: 系统 MUST 验证每个计划至少包含一个锻炼项目
- **FR-016**: 系统 MUST 记录计划的创建时间和最后修改时间
- **FR-017**: 用户 MUST 能够通过点击提醒通知直接跳转到对应的计划详情页

### Key Entities

- **健身计划（Fitness Plan）**: 用户创建的锻炼方案，包含名称、目标描述、执行频率、状态（活动/暂停）、创建时间、最后修改时间
- **锻炼项目（Exercise）**: 计划中的具体锻炼内容，包含项目名称、时长或次数、强度级别、排序顺序
- **提醒设置（Reminder）**: 与计划关联的提醒配置，包含提醒时间、是否启用、提醒内容模板
- **用户（User）**: 创建和管理健身计划的用户，一个用户可以拥有多个健身计划

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户可以在3分钟内完成一个包含至少3个锻炼项目的健身计划创建
- **SC-002**: 用户设置的提醒通知准时送达率达到98%以上（误差在±2分钟内）
- **SC-003**: 90%的用户能够在首次使用时成功创建并保存健身计划，无需帮助文档
- **SC-004**: 用户编辑计划后，变更立即生效，刷新列表或重新打开详情页可见更新内容
- **SC-005**: 系统支持单个用户同时管理至少20个活动的健身计划，列表加载时间不超过2秒
- **SC-006**: 用户可以在5秒内找到并执行暂停/恢复/删除等管理操作
- **SC-007**: 95%的提醒通知点击后能成功跳转到正确的计划详情页

## Assumptions

- 用户已完成注册和登录，具有有效的账户
- 系统具备推送通知能力（移动端通过操作系统推送服务，Web端通过浏览器通知API）
- 用户设备的时区设置正确，系统根据用户本地时间计算提醒时间
- 锻炼项目库由系统预置或用户自定义，本规范不涉及锻炼项目库的管理
- 健身计划主要面向个人用户，不涉及教练-学员的多用户协作场景
- 提醒通知采用标准推送机制，不涉及短信或邮件提醒
- 用户界面语言为中文，支持简体和繁体切换（如需多语言可后续扩展）

## Out of Scope

- 社交功能（分享计划、查看他人计划、点赞评论）
- 实际运动数据的追踪和记录（如完成状态、实际执行时长）
- 基于AI的智能计划推荐和优化建议
- 与可穿戴设备的集成（如智能手环、运动手表）
- 计划模板库和社区共享功能
- 营养计划和饮食建议
- 教练或健身专家的计划审核和指导
- 计划执行的统计报告和数据分析（这属于"数据分析报告"模块）
